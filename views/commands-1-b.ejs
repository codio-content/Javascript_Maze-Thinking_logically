<!DOCTYPE html>
<html>
  <head>
    <title>commands-1</title>
      
    <% include include/blockly.ejs %>

    <script type="text/javascript" src="https://codio.com/ext/iframe/base/static/codio-client.js"></script>
    <script src="/js/blocks.js" type="text/javascript"></script>
    
    <style>
      html, body { margin: 0; padding: 0; height: 100%; width: 100%; }
      #blockly { height: 100%; width: 100%; }
    </style>
    
    <script>
      var codeSpace
      document.addEventListener('DOMContentLoaded', function() {
        var toolbox = document.getElementById('toolbox')       
        codeSpace = Blockly.inject('blockly', { toolbox: toolbox })
        var workspace = document.getElementById('workspace')
        Blockly.Xml.domToWorkspace(Blockly.mainWorkspace, workspace)
        
        function myUpdateFunction() {
          var code = Blockly.JavaScript.workspaceToCode(codeSpace)
          window.codio.saveFile('blockly-gen.js', code)
        }
        codeSpace.addChangeListener(myUpdateFunction);        
        
      });
    </script>
    
  </head>
  <body>
    <% include ../content/blockly/commands-1-b/toolbox.xml %>
    <% include ../content/blockly/commands-1-b/workspace.xml %>
    <div id="blockly"></div> 
  </body>
</html>
